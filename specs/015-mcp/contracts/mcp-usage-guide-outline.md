# Contract: MCP ä½¿ç”¨æŒ‡å—å¤§çº²

**æ–‡ä»¶è·¯å¾„**: `/apps/docs/docs/guide/mcp-usage.md`
**ç›®æ ‡å­—æ•°**: 3000-5000 å­—
**ç›®æ ‡é˜…è¯»æ—¶é—´**: 10-15 åˆ†é’Ÿ

## Frontmatter

```yaml
---
title: MCP ä½¿ç”¨æŒ‡å—
description: äº†è§£å¦‚ä½•é€šè¿‡ MCP åè®®åœ¨ AI å®¢æˆ·ç«¯ä¸­ä½¿ç”¨ Tushare æ•°æ®æœåŠ¡
---
```

## æ–‡æ¡£ç»“æ„

### 1. é¡µé¢æ ‡é¢˜

```markdown
# MCP ä½¿ç”¨æŒ‡å—
```

### 2. ç®€ä»‹ (Introduction)

```markdown
æœ¬æŒ‡å—å°†å¸®åŠ©ä½ åœ¨ AI å®¢æˆ·ç«¯(å¦‚ Claude Desktop)ä¸­é…ç½®å’Œä½¿ç”¨ Tushare MCP æœåŠ¡,å®ç° AI åŠ©æ‰‹ç›´æ¥æŸ¥è¯¢ A è‚¡å¸‚åœºæ•°æ®çš„èƒ½åŠ›ã€‚

**é¢„è®¡å®Œæˆæ—¶é—´**: 15 åˆ†é’Ÿ
**å‰ç½®è¦æ±‚**: Node.js 18+, æœ‰æ•ˆçš„ Tushare API Token
```

**å†…å®¹è¦ç‚¹**:
- ä¸€å¥è¯è¯´æ˜æ–‡æ¡£ç”¨é€”
- æ ‡æ³¨é¢„è®¡å®Œæˆæ—¶é—´å’Œå‰ç½®è¦æ±‚

### 3. ä»€ä¹ˆæ˜¯ MCP (What is MCP)

```markdown
## ä»€ä¹ˆæ˜¯ MCP

[MCP(Model Context Protocol,æ¨¡å‹ä¸Šä¸‹æ–‡åè®®)](https://modelcontextprotocol.io) æ˜¯ä¸€ä¸ªå¼€æºæ ‡å‡†åè®®...

### Tushare MCP æœåŠ¡

Tushare MCP æœåŠ¡æ˜¯åŸºäº MCP åè®®å®ç°çš„ A è‚¡å¸‚åœºæ•°æ®æœåŠ¡å™¨,ä¸º AI æ¨¡å‹æä¾›ä»¥ä¸‹èƒ½åŠ›:

- ğŸ“ˆ æŸ¥è¯¢å®æ—¶è‚¡ç¥¨è¡Œæƒ…
- ğŸ’° æŸ¥è¯¢å…¬å¸è´¢åŠ¡æŠ¥è¡¨
- ğŸ“Š æŸ¥è¯¢å†å² K çº¿æ•°æ®
- ğŸ“‰ æŸ¥è¯¢å¸‚åœºæŒ‡æ•°è¡Œæƒ…
```

**å†…å®¹è¦ç‚¹**:
- å¼•ç”¨ research.md ä¸­çš„ MCP åè®®ç®€ä»‹(150 å­—)
- è¯´æ˜ Tushare MCP æœåŠ¡çš„å…·ä½“åŠŸèƒ½(4 é¡¹)
- æä¾› MCP åè®®å®˜ç½‘é“¾æ¥

**å­—æ•°**: 200-300 å­—

### 4. å‰ç½®è¦æ±‚ (Prerequisites)

```markdown
## å‰ç½®è¦æ±‚

åœ¨å¼€å§‹ä¹‹å‰,è¯·ç¡®ä¿ä½ å·²å…·å¤‡ä»¥ä¸‹æ¡ä»¶:

### 1. Node.js ç¯å¢ƒ

- **ç‰ˆæœ¬è¦æ±‚**: Node.js 18.0.0 æˆ–æ›´é«˜ç‰ˆæœ¬
- **å®‰è£…éªŒè¯**: è¿è¡Œ `node --version` æ£€æŸ¥ç‰ˆæœ¬

### 2. Tushare API Token

Tushare API Token æ˜¯è®¿é—® Tushare Pro æ•°æ®çš„å”¯ä¸€å‡­è¯ã€‚

**è·å–æ­¥éª¤**:
1. è®¿é—® [Tushare Pro å®˜ç½‘](https://tushare.pro/register) æ³¨å†Œè´¦å·
2. ç™»å½•åè¿›å…¥ä¸ªäººä¸­å¿ƒ
3. ç‚¹å‡»"æ¥å£ TOKEN"å¤åˆ¶ä½ çš„ Token

**ç§¯åˆ†è¯´æ˜**: æ–°æ³¨å†Œç”¨æˆ·æœ‰ 100 ç§¯åˆ†,å¯ä»¥æŸ¥è¯¢åŸºç¡€æ•°æ®ã€‚éƒ¨åˆ†é«˜çº§æ•°æ®éœ€è¦æ›´é«˜ç§¯åˆ†ç­‰çº§ã€‚

### 3. æ”¯æŒ MCP çš„ AI å®¢æˆ·ç«¯

æœ¬æŒ‡å—é‡ç‚¹ä»‹ç» Claude Desktop çš„é…ç½®,åŒæ—¶æ”¯æŒä»¥ä¸‹å®¢æˆ·ç«¯:

- [Claude Desktop](https://claude.ai/download) â­ æ¨è
- [Cursor](https://cursor.sh)
- [VSCode with Cline](https://marketplace.visualstudio.com/items?itemName=saoudrizwan.claude-dev)
- [Zed Editor](https://zed.dev)

æ›´å¤šå®¢æˆ·ç«¯è¯·æŸ¥çœ‹ [MCP å®¢æˆ·ç«¯æ€»è§ˆ](https://modelcontextprotocol.io/clients)ã€‚
```

**å†…å®¹è¦ç‚¹**:
- æ˜ç¡®åˆ—å‡º 3 ä¸ªå‰ç½®æ¡ä»¶
- æä¾› Tushare Token è·å–çš„è¯¦ç»†æ­¥éª¤
- åˆ—å‡ºæ”¯æŒçš„ AI å®¢æˆ·ç«¯(é‡ç‚¹æ¨è Claude Desktop)
- æ‰€æœ‰å¤–éƒ¨é“¾æ¥å¯ç‚¹å‡»

**å­—æ•°**: 300-400 å­—

### 5. å®‰è£… (Installation)

```markdown
## å®‰è£…

Tushare MCP æœåŠ¡æ”¯æŒä¸¤ç§éƒ¨ç½²æ–¹å¼:

### æ–¹å¼ 1: é€šè¿‡ npm å®‰è£…(æ¨è)

é€‚ç”¨äºç”Ÿäº§ä½¿ç”¨å’Œå¿«é€Ÿä½“éªŒã€‚

\```bash
# ä½¿ç”¨ pnpm
pnpm add -g @hestudy/tushare-mcp

# ä½¿ç”¨ npm
npm install -g @hestudy/tushare-mcp
\```

### æ–¹å¼ 2: æœ¬åœ°å¼€å‘

é€‚ç”¨äºéœ€è¦ä¿®æ”¹æºç æˆ–å‚ä¸å¼€å‘çš„åœºæ™¯ã€‚

\```bash
# å…‹éš†ä»“åº“
git clone https://github.com/your-org/tushare-sdk.git
cd tushare-sdk

# å®‰è£…ä¾èµ–
pnpm install

# æ„å»º MCP æœåŠ¡
cd apps/tushare-mcp
pnpm build
\```

æ„å»ºå®Œæˆå,æœåŠ¡å…¥å£æ–‡ä»¶ä½äº `apps/tushare-mcp/dist/index.js`ã€‚
```

**å†…å®¹è¦ç‚¹**:
- æä¾›ä¸¤ç§å®‰è£…æ–¹å¼
- è¯´æ˜å„è‡ªçš„é€‚ç”¨åœºæ™¯
- æä¾›æ¸…æ™°çš„å‘½ä»¤è¡ŒæŒ‡ä»¤

**å­—æ•°**: 150-200 å­—

### 6. é…ç½® (Configuration)

```markdown
## é…ç½®

### Claude Desktop é…ç½®

Claude Desktop æ˜¯ä½¿ç”¨ MCP æœåŠ¡æœ€ä¾¿æ·çš„æ–¹å¼,ä»¥ä¸‹æ˜¯è¯¦ç»†é…ç½®æ­¥éª¤ã€‚

#### æ­¥éª¤ 1: æ‰¾åˆ°é…ç½®æ–‡ä»¶

æ ¹æ®ä½ çš„æ“ä½œç³»ç»Ÿ,é…ç½®æ–‡ä»¶ä½äº:

| æ“ä½œç³»ç»Ÿ | é…ç½®æ–‡ä»¶è·¯å¾„ |
|---------|-------------|
| macOS | `~/Library/Application Support/Claude/claude_desktop_config.json` |
| Windows | `%APPDATA%\Claude\claude_desktop_config.json` æˆ–<br>`C:\Users\ä½ çš„ç”¨æˆ·å\AppData\Roaming\Claude\claude_desktop_config.json` |
| Linux | `~/.config/Claude/claude_desktop_config.json` |

**å¿«æ·è®¿é—®**: æ‰“å¼€ Claude Desktop â†’ è®¾ç½® â†’ Developer â†’ ç‚¹å‡» "Edit Config" æŒ‰é’®

#### æ­¥éª¤ 2: ç¼–è¾‘é…ç½®æ–‡ä»¶

##### ä½¿ç”¨ npx æ–¹å¼(æ¨è)

æ— éœ€é¢„å…ˆå®‰è£…,æ¯æ¬¡å¯åŠ¨æ—¶è‡ªåŠ¨ä¸‹è½½æœ€æ–°ç‰ˆæœ¬:

\```json
{
  "mcpServers": {
    "tushare": {
      "command": "npx",
      "args": [
        "-y",
        "@hestudy/tushare-mcp"
      ],
      "env": {
        "TUSHARE_TOKEN": "your_tushare_token_here"
      }
    }
  }
}
\```

##### ä½¿ç”¨æœ¬åœ°å¼€å‘æ–¹å¼

é€‚ç”¨äºéœ€è¦è°ƒè¯•æˆ–ä¿®æ”¹æºç çš„åœºæ™¯:

\```json
{
  "mcpServers": {
    "tushare": {
      "command": "node",
      "args": [
        "/Users/your-username/path/to/tushare-sdk/apps/tushare-mcp/dist/index.js"
      ],
      "env": {
        "TUSHARE_TOKEN": "your_tushare_token_here"
      }
    }
  }
}
\```

**é‡è¦æç¤º**:
- å°† `your_tushare_token_here` æ›¿æ¢ä¸ºä½ çš„å®é™… Tushare Token
- æœ¬åœ°å¼€å‘æ–¹å¼éœ€è¦ä½¿ç”¨ç»å¯¹è·¯å¾„
- Windows ç”¨æˆ·è·¯å¾„ç¤ºä¾‹: `C:\\Users\\your-username\\tushare-sdk\\apps\\tushare-mcp\\dist\\index.js`(æ³¨æ„åŒåæ–œæ )

#### æ­¥éª¤ 3: é‡å¯ Claude Desktop

ä¿å­˜é…ç½®æ–‡ä»¶å,**å®Œå…¨é€€å‡º** Claude Desktop å¹¶é‡æ–°å¯åŠ¨,æ–°é…ç½®æ‰ä¼šç”Ÿæ•ˆã€‚

**éªŒè¯æ–¹æ³•**: åœ¨ Claude å¯¹è¯ä¸­è¾“å…¥ "ä½ ç°åœ¨å¯ä»¥ä½¿ç”¨å“ªäº›å·¥å…·?",å¦‚æœçœ‹åˆ° Tushare ç›¸å…³å·¥å…·,è¯´æ˜é…ç½®æˆåŠŸã€‚

### å…¶ä»–å®¢æˆ·ç«¯é…ç½®

<details>
<summary>Cursor é…ç½®</summary>

**é…ç½®æ–‡ä»¶ä½ç½®**:
- å…¨å±€é…ç½®: `~/.cursor/mcp.json`
- é¡¹ç›®é…ç½®: `<project-root>/.cursor/mcp.json`

**é…ç½®å†…å®¹** (ä¸ Claude Desktop ç›¸åŒ):

\```json
{
  "mcpServers": {
    "tushare": {
      "command": "npx",
      "args": ["-y", "@hestudy/tushare-mcp"],
      "env": {
        "TUSHARE_TOKEN": "your_tushare_token_here"
      }
    }
  }
}
\```

</details>

<details>
<summary>VSCode with Cline é…ç½®</summary>

**é…ç½®æ–¹å¼**:
1. ç‚¹å‡» Cline é¢æ¿é¡¶éƒ¨çš„ "MCP Servers" å›¾æ ‡
2. é€‰æ‹© "Installed" æ ‡ç­¾
3. ç‚¹å‡» "Configure MCP Servers"
4. æ·»åŠ ä»¥ä¸‹é…ç½®

**é…ç½®æ–‡ä»¶**: `cline_mcp_settings.json`

\```json
{
  "mcpServers": {
    "tushare": {
      "command": "npx",
      "args": ["-y", "@hestudy/tushare-mcp"],
      "env": {
        "TUSHARE_TOKEN": "your_tushare_token_here"
      }
    }
  }
}
\```

**æç¤º**: Cline æ”¯æŒå•ç‹¬å¯ç”¨/ç¦ç”¨æ¯ä¸ª MCP æœåŠ¡å™¨ã€‚

</details>

<details>
<summary>Zed Editor é…ç½®</summary>

**é…ç½®æ–‡ä»¶**: `settings.json`

**è®¿é—®æ–¹å¼**: `Cmd/Ctrl + ,` æˆ–è¿è¡Œå‘½ä»¤ `zed: open settings`

**é…ç½®å†…å®¹**:

\```json
{
  "context_servers": {
    "tushare": {
      "command": "npx",
      "args": ["-y", "@hestudy/tushare-mcp"],
      "env": {
        "TUSHARE_TOKEN": "your_tushare_token_here"
      }
    }
  }
}
\```

</details>

æ›´å¤šå®¢æˆ·ç«¯çš„é…ç½®æ–¹å¼,è¯·å‚è€ƒ [MCP å®˜æ–¹æ–‡æ¡£](https://modelcontextprotocol.io/docs)ã€‚
```

**å†…å®¹è¦ç‚¹**:
- é‡ç‚¹è¯¦ç»†è¯´æ˜ Claude Desktop é…ç½®(æ»¡è¶³ FR-007)
- æä¾›ä¸åŒæ“ä½œç³»ç»Ÿçš„è·¯å¾„è¡¨æ ¼(æ»¡è¶³ FR-008)
- æä¾›ä¸¤ç§éƒ¨ç½²æ–¹å¼çš„é…ç½®ç¤ºä¾‹
- å¼ºè°ƒé‡å¯å®¢æˆ·ç«¯çš„å¿…è¦æ€§
- å…¶ä»–å®¢æˆ·ç«¯ä½¿ç”¨æŠ˜å å—å±•ç¤º

**å­—æ•°**: 800-1000 å­—

### 7. å¯ç”¨å·¥å…· (Available Tools)

```markdown
## å¯ç”¨å·¥å…·

Tushare MCP æœåŠ¡æä¾›ä»¥ä¸‹ 4 ä¸ªå·¥å…·,å¯åœ¨ AI å¯¹è¯ä¸­è‡ªåŠ¨è°ƒç”¨ã€‚

### 1. query_stock_quote - è‚¡ç¥¨è¡Œæƒ…æŸ¥è¯¢

æŸ¥è¯¢å®æ—¶è‚¡ç¥¨è¡Œæƒ…æ•°æ®,åŒ…æ‹¬æœ€æ–°ä»·ã€æ¶¨è·Œå¹…ã€æˆäº¤é‡ç­‰ã€‚

**å‚æ•°è¯´æ˜**:

| å‚æ•°å | æ˜¯å¦å¿…å¡« | ç±»å‹ | è¯´æ˜ | ç¤ºä¾‹å€¼ |
|-------|---------|------|------|--------|
| ts_code | âœ… å¿…éœ€ | string | è‚¡ç¥¨ä»£ç ,æ ¼å¼å¦‚ '600519.SH'(ä¸Šäº¤æ‰€)æˆ– '000001.SZ'(æ·±äº¤æ‰€) | `600519.SH` |
| trade_date | âšª å¯é€‰ | string | äº¤æ˜“æ—¥æœŸ,æ ¼å¼å¦‚ '20251014',ä¸å¡«åˆ™è¿”å›æœ€æ–°æ•°æ® | `20251014` |

**ç¤ºä¾‹å‚æ•°**:

\```json
{
  "ts_code": "600519.SH",
  "trade_date": "20251014"
}
\```

### 2. query_financial - è´¢åŠ¡æ•°æ®æŸ¥è¯¢

æŸ¥è¯¢å…¬å¸è´¢åŠ¡æŠ¥è¡¨æ•°æ®,æ”¯æŒåˆ©æ¶¦è¡¨ã€èµ„äº§è´Ÿå€ºè¡¨ã€ç°é‡‘æµé‡è¡¨ã€‚

**å‚æ•°è¯´æ˜**:

| å‚æ•°å | æ˜¯å¦å¿…å¡« | ç±»å‹ | è¯´æ˜ | ç¤ºä¾‹å€¼ |
|-------|---------|------|------|--------|
| ts_code | âœ… å¿…éœ€ | string | è‚¡ç¥¨ä»£ç  | `600519.SH` |
| period | âœ… å¿…éœ€ | string | æŠ¥å‘ŠæœŸ,æ ¼å¼å¦‚ '20231231'(å­£åº¦æœ«æ—¥æœŸ) | `20231231` |
| report_type | âœ… å¿…éœ€ | string | æŠ¥è¡¨ç±»å‹: "income"(åˆ©æ¶¦è¡¨), "balance"(èµ„äº§è´Ÿå€ºè¡¨), "cashflow"(ç°é‡‘æµé‡è¡¨) | `income` |

**ç¤ºä¾‹å‚æ•°**:

\```json
{
  "ts_code": "600519.SH",
  "period": "20231231",
  "report_type": "income"
}
\```

### 3. query_kline - Kçº¿æ•°æ®æŸ¥è¯¢

æŸ¥è¯¢å†å² K çº¿æ•°æ®,æ”¯æŒæ—¥çº¿ã€å‘¨çº¿ã€æœˆçº¿ã€‚

**å‚æ•°è¯´æ˜**:

| å‚æ•°å | æ˜¯å¦å¿…å¡« | ç±»å‹ | è¯´æ˜ | ç¤ºä¾‹å€¼ |
|-------|---------|------|------|--------|
| ts_code | âœ… å¿…éœ€ | string | è‚¡ç¥¨ä»£ç  | `600519.SH` |
| start_date | âœ… å¿…éœ€ | string | å¼€å§‹æ—¥æœŸ,æ ¼å¼å¦‚ '20251001' | `20251001` |
| end_date | âœ… å¿…éœ€ | string | ç»“æŸæ—¥æœŸ,æ ¼å¼å¦‚ '20251014' | `20251014` |
| freq | âšª å¯é€‰ | string | Kçº¿é¢‘ç‡: "D"(æ—¥çº¿), "W"(å‘¨çº¿), "M"(æœˆçº¿),é»˜è®¤ "D" | `D` |

**ç¤ºä¾‹å‚æ•°**:

\```json
{
  "ts_code": "600519.SH",
  "start_date": "20251001",
  "end_date": "20251014",
  "freq": "D"
}
\```

### 4. query_index - å¸‚åœºæŒ‡æ•°æŸ¥è¯¢

æŸ¥è¯¢å¸‚åœºæŒ‡æ•°è¡Œæƒ…æ•°æ®,å¦‚ä¸Šè¯æŒ‡æ•°ã€æ·±è¯æˆæŒ‡ã€åˆ›ä¸šæ¿æŒ‡ç­‰ã€‚

**å‚æ•°è¯´æ˜**:

| å‚æ•°å | æ˜¯å¦å¿…å¡« | ç±»å‹ | è¯´æ˜ | ç¤ºä¾‹å€¼ |
|-------|---------|------|------|--------|
| ts_code | âœ… å¿…éœ€ | string | æŒ‡æ•°ä»£ç ,å¦‚ '000001.SH'(ä¸Šè¯æŒ‡æ•°) | `000001.SH` |
| trade_date | âšª å¯é€‰ | string | äº¤æ˜“æ—¥æœŸ,æ ¼å¼å¦‚ '20251014' | `20251014` |

**å¸¸ç”¨æŒ‡æ•°ä»£ç **:
- `000001.SH`: ä¸Šè¯æŒ‡æ•°
- `399001.SZ`: æ·±è¯æˆæŒ‡
- `399006.SZ`: åˆ›ä¸šæ¿æŒ‡
- `000300.SH`: æ²ªæ·±300
- `000016.SH`: ä¸Šè¯50

**ç¤ºä¾‹å‚æ•°**:

\```json
{
  "ts_code": "000001.SH",
  "trade_date": "20251014"
}
\```
```

**å†…å®¹è¦ç‚¹**:
- åˆ—å‡ºæ‰€æœ‰ 4 ä¸ªå·¥å…·(æ»¡è¶³ FR-009)
- æ¯ä¸ªå·¥å…·æä¾›å®Œæ•´çš„å‚æ•°è¡¨æ ¼(æ»¡è¶³ FR-010)
- å‚æ•°è¡¨æ ¼åŒ…å«:å‚æ•°åã€æ˜¯å¦å¿…å¡«ã€ç±»å‹ã€è¯´æ˜ã€ç¤ºä¾‹å€¼
- æä¾› JSON æ ¼å¼çš„ç¤ºä¾‹å‚æ•°

**å­—æ•°**: 600-800 å­—

### 8. ä½¿ç”¨ç¤ºä¾‹ (Usage Examples)

```markdown
## ä½¿ç”¨ç¤ºä¾‹

ä»¥ä¸‹æ˜¯å…¸å‹çš„ä½¿ç”¨åœºæ™¯ç¤ºä¾‹,å±•ç¤ºå¦‚ä½•åœ¨ AI å¯¹è¯ä¸­ä½¿ç”¨ Tushare MCP æœåŠ¡ã€‚

### ç¤ºä¾‹ 1: æŸ¥è¯¢è‚¡ç¥¨è¡Œæƒ…

**ç”¨æˆ·æé—®**:

> "å¸®æˆ‘æŸ¥è¯¢è´µå·èŒ…å° (600519.SH) æœ€æ–°çš„è‚¡ç¥¨è¡Œæƒ…"

**AI å·¥å…·è°ƒç”¨**:

AI ä¼šè‡ªåŠ¨è°ƒç”¨ `query_stock_quote` å·¥å…·:

\```json
{
  "tool": "query_stock_quote",
  "parameters": {
    "ts_code": "600519.SH"
  }
}
\```

**è¿”å›æ•°æ®ç¤ºä¾‹**:

AI ä¼šæ”¶åˆ°ç±»ä¼¼ä»¥ä¸‹çš„æ•°æ®å¹¶ä¸ºä½ åˆ†æ:

| å­—æ®µ | å€¼ |
|------|-----|
| è‚¡ç¥¨ä»£ç  | 600519.SH |
| è‚¡ç¥¨åç§° | è´µå·èŒ…å° |
| æœ€æ–°ä»· | 1680.50 å…ƒ |
| æ¶¨è·Œå¹… | +1.23% |
| æˆäº¤é‡ | 1,234,567 è‚¡ |
| æˆäº¤é¢ | 20.8 äº¿å…ƒ |

### ç¤ºä¾‹ 2: æŸ¥è¯¢è´¢åŠ¡æ•°æ®

**ç”¨æˆ·æé—®**:

> "æŸ¥è¯¢å¹³å®‰é“¶è¡Œ 2023 å¹´å¹´æŠ¥çš„åˆ©æ¶¦è¡¨æ•°æ®"

**AI å·¥å…·è°ƒç”¨**:

\```json
{
  "tool": "query_financial",
  "parameters": {
    "ts_code": "000001.SZ",
    "period": "20231231",
    "report_type": "income"
  }
}
\```

**è¿”å›æ•°æ®ç¤ºä¾‹**:

| è´¢åŠ¡æŒ‡æ ‡ | é‡‘é¢(äº¿å…ƒ) |
|---------|----------|
| è¥ä¸šæ€»æ”¶å…¥ | 1,856.32 |
| è¥ä¸šåˆ©æ¶¦ | 523.45 |
| åˆ©æ¶¦æ€»é¢ | 530.12 |
| å‡€åˆ©æ¶¦ | 450.87 |

### ç¤ºä¾‹ 3: æŸ¥è¯¢ K çº¿æ•°æ®

**ç”¨æˆ·æé—®**:

> "è·å–ä¸Šè¯æŒ‡æ•°æœ€è¿‘ä¸€ä¸ªæœˆçš„æ—¥çº¿æ•°æ®"

**AI å·¥å…·è°ƒç”¨**:

\```json
{
  "tool": "query_kline",
  "parameters": {
    "ts_code": "000001.SH",
    "start_date": "20250914",
    "end_date": "20251014",
    "freq": "D"
  }
}
\```

**è¿”å›æ•°æ®ç¤ºä¾‹**:

AI ä¼šæ”¶åˆ° 20+ æ¡ K çº¿æ•°æ®,åŒ…å«:

| å­—æ®µ | è¯´æ˜ |
|------|------|
| trade_date | äº¤æ˜“æ—¥æœŸ |
| open | å¼€ç›˜ä»· |
| high | æœ€é«˜ä»· |
| low | æœ€ä½ä»· |
| close | æ”¶ç›˜ä»· |
| volume | æˆäº¤é‡ |

AI å¯ä»¥åŸºäºè¿™äº›æ•°æ®åˆ†æè¶‹åŠ¿ã€è®¡ç®—æ¶¨è·Œå¹…ç­‰ã€‚

### æ›´å¤šä½¿ç”¨æŠ€å·§

- **ç»„åˆæŸ¥è¯¢**: ä½ å¯ä»¥åœ¨ä¸€æ¬¡å¯¹è¯ä¸­è¦æ±‚ AI æŸ¥è¯¢å¤šåªè‚¡ç¥¨,AI ä¼šè‡ªåŠ¨è°ƒç”¨å¤šæ¬¡å·¥å…·
- **æ•°æ®åˆ†æ**: AI ä¸ä»…è¿”å›æ•°æ®,è¿˜èƒ½å¸®ä½ åˆ†æè´¢åŠ¡æŒ‡æ ‡ã€è®¡ç®—æ¶¨è·Œå¹…ã€ç»˜åˆ¶è¶‹åŠ¿å›¾ç­‰
- **è‡ªç„¶è¯­è¨€**: æ— éœ€è®°å¿†å‚æ•°æ ¼å¼,ç”¨è‡ªç„¶è¯­è¨€æè¿°ä½ çš„éœ€æ±‚å³å¯
```

**å†…å®¹è¦ç‚¹**:
- æä¾›è‡³å°‘ 3 ä¸ªç¤ºä¾‹(æ»¡è¶³ FR-011)
- æ¯ä¸ªç¤ºä¾‹åŒ…å«:ç”¨æˆ·æé—®ã€AI å·¥å…·è°ƒç”¨ã€è¿”å›æ•°æ®æ ¼å¼(æ»¡è¶³ FR-012)
- è¦†ç›–ä¸»è¦å·¥å…·(è‚¡ç¥¨è¡Œæƒ…ã€è´¢åŠ¡æ•°æ®ã€Kçº¿æ•°æ®)
- ä½¿ç”¨è¡¨æ ¼æ¸…æ™°å±•ç¤ºæ•°æ®æ ¼å¼

**å­—æ•°**: 600-800 å­—

### 9. è¿›é˜¶é…ç½® (Advanced Configuration)

```markdown
## è¿›é˜¶é…ç½®

### ç¯å¢ƒå˜é‡è¯´æ˜

é™¤äº† `TUSHARE_TOKEN`,è¿˜å¯ä»¥é…ç½®ä»¥ä¸‹ç¯å¢ƒå˜é‡:

| ç¯å¢ƒå˜é‡ | è¯´æ˜ | é»˜è®¤å€¼ | ç¤ºä¾‹ |
|---------|------|--------|------|
| `TUSHARE_TOKEN` | Tushare API Token | (å¿…éœ€) | `your_token_here` |
| `LOG_LEVEL` | æ—¥å¿—çº§åˆ« | `info` | `debug` / `info` / `warn` / `error` |
| `RATE_LIMIT_MAX_REQUESTS` | é™æµ:æœ€å¤§è¯·æ±‚æ•° | `100` | `200` |
| `RATE_LIMIT_WINDOW_MS` | é™æµ:æ—¶é—´çª—å£(æ¯«ç§’) | `60000` | `60000` |

### è°ƒæ•´é™æµå‚æ•°

å¦‚æœä½ çš„ Tushare ç§¯åˆ†ç­‰çº§è¾ƒé«˜,å¯ä»¥è°ƒæ•´é™æµå‚æ•°æå‡æ€§èƒ½:

\```json
{
  "mcpServers": {
    "tushare": {
      "command": "npx",
      "args": ["-y", "@hestudy/tushare-mcp"],
      "env": {
        "TUSHARE_TOKEN": "your_token",
        "RATE_LIMIT_MAX_REQUESTS": "200",
        "RATE_LIMIT_WINDOW_MS": "60000"
      }
    }
  }
}
\```

**ç§¯åˆ†ç­‰çº§å‚è€ƒ**:
- 100 ç§¯åˆ†: 1 æ¬¡/ç§’ (é»˜è®¤é…ç½®å·²è¶³å¤Ÿ)
- 2000 ç§¯åˆ†: 5 æ¬¡/ç§’ (å¯è®¾ç½® `MAX_REQUESTS=300`)
- 5000 ç§¯åˆ†: 20 æ¬¡/ç§’ (å¯è®¾ç½® `MAX_REQUESTS=1200`)

### è°ƒè¯•æ—¥å¿—

å¦‚éœ€æŸ¥çœ‹è¯¦ç»†çš„è°ƒè¯•æ—¥å¿—,è®¾ç½® `LOG_LEVEL=debug`:

\```json
{
  "env": {
    "TUSHARE_TOKEN": "your_token",
    "LOG_LEVEL": "debug"
  }
}
\```

æ—¥å¿—æ–‡ä»¶ä½ç½®:
- macOS/Linux: `~/Library/Logs/Claude/mcp-server-tushare.log`
- Windows: `%APPDATA%\Claude\Logs\mcp-server-tushare.log`
```

**å†…å®¹è¦ç‚¹**:
- è¯´æ˜æ‰€æœ‰å¯é…ç½®çš„ç¯å¢ƒå˜é‡(æ»¡è¶³ FR-014)
- æä¾›é™æµå‚æ•°è°ƒæ•´ç¤ºä¾‹
- è¯´æ˜æ—¥å¿—çº§åˆ«è®¾ç½®å’Œæ—¥å¿—æ–‡ä»¶ä½ç½®

**å­—æ•°**: 300-400 å­—

### 10. å¸¸è§é—®é¢˜ (FAQ)

```markdown
## å¸¸è§é—®é¢˜

### Q1: Token æ— æ•ˆæˆ–è®¤è¯å¤±è´¥

**é”™è¯¯ä¿¡æ¯**: "Authentication failed" æˆ– "Invalid token"

**è§£å†³æ–¹æ¡ˆ**:
1. æ£€æŸ¥ Token æ˜¯å¦æ­£ç¡®å¤åˆ¶(æ— å¤šä½™ç©ºæ ¼)
2. è®¿é—® [Tushare Pro](https://tushare.pro) ç™»å½•è´¦å·,åœ¨ä¸ªäººä¸­å¿ƒç¡®è®¤ Token
3. å¦‚æœ Token å·²æ³„éœ²,å¯ä»¥åœ¨ä¸ªäººä¸­å¿ƒç‚¹å‡»"åˆ·æ–°"ç”Ÿæˆæ–° Token
4. ç¡®è®¤è´¦å·çŠ¶æ€æ˜¯å¦æ­£å¸¸(æœªè¢«å°ç¦)

### Q2: é…ç½®æ–‡ä»¶æ‰¾ä¸åˆ°æˆ–ä¿®æ”¹ä¸ç”Ÿæ•ˆ

**é—®é¢˜æè¿°**: æ‰¾ä¸åˆ°é…ç½®æ–‡ä»¶,æˆ–è€…ä¿®æ”¹åæ²¡æœ‰æ•ˆæœ

**è§£å†³æ–¹æ¡ˆ**:
1. **æ‰¾ä¸åˆ°æ–‡ä»¶**: å‚è€ƒæœ¬æ–‡æ¡£"é…ç½®"ç« èŠ‚çš„è·¯å¾„è¡¨æ ¼,ç¡®ä¿è·¯å¾„æ­£ç¡®
   - macOS: `~/Library/Application Support/Claude/` (æ³¨æ„ `Library` æ˜¯éšè—æ–‡ä»¶å¤¹)
   - Windows: åœ¨æ–‡ä»¶ç®¡ç†å™¨åœ°å€æ è¾“å…¥ `%APPDATA%\Claude`
2. **ä¿®æ”¹ä¸ç”Ÿæ•ˆ**: ç¡®ä¿å®Œå…¨é€€å‡º Claude Desktop(ä¸æ˜¯æœ€å°åŒ–),ç„¶åé‡æ–°å¯åŠ¨
3. **JSON æ ¼å¼é”™è¯¯**: ä½¿ç”¨ JSON éªŒè¯å·¥å…·æ£€æŸ¥é…ç½®æ–‡ä»¶è¯­æ³•æ˜¯å¦æ­£ç¡®

### Q3: MCP æœåŠ¡å¯åŠ¨å¤±è´¥

**é”™è¯¯ä¿¡æ¯**: "Failed to start MCP server" æˆ–è¿æ¥è¶…æ—¶

**è§£å†³æ–¹æ¡ˆ**:
1. **Node.js ç‰ˆæœ¬**: ç¡®è®¤ Node.js ç‰ˆæœ¬ >= 18.0.0 (`node --version`)
2. **ç½‘ç»œé—®é¢˜**: npx æ–¹å¼éœ€è¦è”ç½‘ä¸‹è½½,ç¡®ä¿ç½‘ç»œç•…é€š
3. **è·¯å¾„é—®é¢˜**: æœ¬åœ°å¼€å‘æ–¹å¼éœ€è¦ä½¿ç”¨ç»å¯¹è·¯å¾„,æ£€æŸ¥è·¯å¾„æ˜¯å¦æ­£ç¡®
4. **æŸ¥çœ‹æ—¥å¿—**: è®¾ç½® `LOG_LEVEL=debug` å¹¶æŸ¥çœ‹æ—¥å¿—æ–‡ä»¶å®šä½é—®é¢˜

### Q4: æŸ¥è¯¢è¿”å›ç©ºæ•°æ®

**é—®é¢˜æè¿°**: å·¥å…·è°ƒç”¨æˆåŠŸ,ä½†è¿”å›çš„æ•°æ®ä¸ºç©º

**å¯èƒ½åŸå› **:
1. **éäº¤æ˜“æ—¥**: æŸ¥è¯¢çš„æ—¥æœŸæ˜¯å‘¨æœ«æˆ–èŠ‚å‡æ—¥,æ²¡æœ‰äº¤æ˜“æ•°æ®
2. **å‚æ•°æ ¼å¼é”™è¯¯**: æ£€æŸ¥æ—¥æœŸæ ¼å¼æ˜¯å¦ä¸º `YYYYMMDD`(å¦‚ `20251014`)
3. **è‚¡ç¥¨ä»£ç é”™è¯¯**: ç¡®è®¤è‚¡ç¥¨ä»£ç æ ¼å¼æ­£ç¡®(å¦‚ `600519.SH` è€Œé `600519`)
4. **ç§¯åˆ†ä¸è¶³**: æŸäº›é«˜çº§æ•°æ®(å¦‚æ¯æ—¥æŒ‡æ ‡)éœ€è¦æ›´é«˜çš„ç§¯åˆ†ç­‰çº§

**è§£å†³æ–¹æ¡ˆ**: å…ˆæŸ¥è¯¢äº¤æ˜“æ—¥å†ç¡®è®¤æ˜¯å¦ä¸ºäº¤æ˜“æ—¥,ç„¶åæ£€æŸ¥å‚æ•°æ ¼å¼

### Q5: å¦‚ä½•æŸ¥çœ‹ AI è°ƒç”¨äº†å“ªäº›å·¥å…·?

**æ–¹æ³•**:
1. åœ¨ Claude å¯¹è¯ä¸­ç›´æ¥è¯¢é—®: "ä½ åˆšæ‰è°ƒç”¨äº†å“ªäº›å·¥å…·?"
2. æŸ¥çœ‹ Claude Desktop çš„ Developer é¢æ¿(å¦‚æœæ”¯æŒ)
3. è®¾ç½® `LOG_LEVEL=debug` æŸ¥çœ‹è¯¦ç»†æ—¥å¿—

### Q6: æ”¯æŒå“ªäº› AI å®¢æˆ·ç«¯?

**å®˜æ–¹æ”¯æŒ**:
- Claude Desktop (æ¨è)
- Cursor
- VSCode with Cline
- Zed Editor

**ç†è®ºæ”¯æŒ**: æ‰€æœ‰ç¬¦åˆ MCP åè®®æ ‡å‡†çš„å®¢æˆ·ç«¯éƒ½åº”è¯¥å¯ä»¥ä½¿ç”¨,å…·ä½“é…ç½®æ–¹å¼å¯èƒ½æœ‰å·®å¼‚ã€‚

æ›´å¤šé—®é¢˜è¯·è®¿é—® [GitHub Issues](https://github.com/your-org/tushare-sdk/issues)ã€‚
```

**å†…å®¹è¦ç‚¹**:
- æä¾›è‡³å°‘ 3 ç§å¸¸è§é—®é¢˜(æ»¡è¶³ FR-013)
- æ¯ä¸ªé—®é¢˜åŒ…å«:é—®é¢˜æè¿°ã€å¯èƒ½åŸå› ã€è§£å†³æ–¹æ¡ˆ
- è¦†ç›– Token é”™è¯¯ã€é…ç½®é—®é¢˜ã€å¯åŠ¨å¤±è´¥ã€æ•°æ®ä¸ºç©ºç­‰åœºæ™¯

**å­—æ•°**: 500-600 å­—

### 11. ç›¸å…³é“¾æ¥ (Related Links)

```markdown
## ç›¸å…³é“¾æ¥

### å®˜æ–¹èµ„æº

- **MCP åè®®**: https://modelcontextprotocol.io
- **MCP å®˜æ–¹æ–‡æ¡£**: https://modelcontextprotocol.io/docs
- **MCP å®¢æˆ·ç«¯æ€»è§ˆ**: https://modelcontextprotocol.io/clients

### Tushare Pro

- **Tushare Pro å®˜ç½‘**: https://tushare.pro
- **æ³¨å†Œè·å– Token**: https://tushare.pro/register
- **Tushare æ–‡æ¡£**: https://tushare.pro/document/2

### AI å®¢æˆ·ç«¯

- **Claude Desktop**: https://claude.ai/download
- **Cursor**: https://cursor.sh
- **VSCode Cline**: https://docs.cline.bot
- **Zed Editor**: https://zed.dev

### æœ¬é¡¹ç›®

- **GitHub ä»“åº“**: https://github.com/your-org/tushare-sdk
- **MCP æœåŠ¡æºç **: https://github.com/your-org/tushare-sdk/tree/main/apps/tushare-mcp
- **Tushare SDK æ–‡æ¡£**: /guide/quick-start
- **é—®é¢˜åé¦ˆ**: https://github.com/your-org/tushare-sdk/issues
```

**å†…å®¹è¦ç‚¹**:
- åŒ…å«æ‰€æœ‰å¿…éœ€çš„å¤–éƒ¨é“¾æ¥(æ»¡è¶³ FR-015)
- åˆ†ç±»ç»„ç»‡:å®˜æ–¹èµ„æºã€Tushareã€AI å®¢æˆ·ç«¯ã€æœ¬é¡¹ç›®
- æ‰€æœ‰é“¾æ¥å¯ç‚¹å‡»

**å­—æ•°**: 100-150 å­—

## éªŒæ”¶æ ‡å‡†

- [ ] æ–‡æ¡£å­—æ•°åœ¨ 3000-5000 å­—ä¹‹é—´
- [ ] åŒ…å«æ‰€æœ‰ 11 ä¸ªç« èŠ‚
- [ ] è‡³å°‘ 3 ä¸ªä½¿ç”¨ç¤ºä¾‹,è¦†ç›–ä¸åŒå·¥å…·
- [ ] è‡³å°‘ 3 ç§å¸¸è§é—®é¢˜æ’æŸ¥
- [ ] æ‰€æœ‰é…ç½®ç¤ºä¾‹å¯ç›´æ¥å¤åˆ¶ç²˜è´´
- [ ] æ‰€æœ‰å¤–éƒ¨é“¾æ¥æœ‰æ•ˆ
- [ ] ä»£ç å—æ­£ç¡®ä½¿ç”¨è¯­è¨€æ ‡è¯†
- [ ] è¡¨æ ¼æ ¼å¼è§„èŒƒ
- [ ] Frontmatter åŒ…å« title å’Œ description

## ä¼°è®¡å­—æ•°åˆ†å¸ƒ

| ç« èŠ‚ | ä¼°è®¡å­—æ•° |
|-----|---------|
| ç®€ä»‹ | 100 |
| ä»€ä¹ˆæ˜¯ MCP | 250 |
| å‰ç½®è¦æ±‚ | 350 |
| å®‰è£… | 180 |
| é…ç½® | 950 |
| å¯ç”¨å·¥å…· | 700 |
| ä½¿ç”¨ç¤ºä¾‹ | 700 |
| è¿›é˜¶é…ç½® | 350 |
| å¸¸è§é—®é¢˜ | 550 |
| ç›¸å…³é“¾æ¥ | 120 |
| **æ€»è®¡** | **~4250** |
