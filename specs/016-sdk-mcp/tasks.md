# Tasks: MCP æœåŠ¡è¡¥å…… SDK æœªé›†æˆåŠŸèƒ½

**Feature**: 016-sdk-mcp | **Branch**: `016-sdk-mcp` | **Date**: 2025-10-14

**Input**: è®¾è®¡æ–‡æ¡£æ¥è‡ª `/specs/016-sdk-mcp/`
- plan.md (æŠ€æœ¯æ ˆå’Œæ¶æ„)
- spec.md (ç”¨æˆ·æ•…äº‹å’Œéœ€æ±‚)
- research.md (æŠ€æœ¯è°ƒç ”)
- data-model.md (æ•°æ®æ¨¡å‹)
- contracts/ (API å®šä¹‰)
- quickstart.md (æµ‹è¯•åœºæ™¯)

**å¼€å‘æ–¹å¼**: æµ‹è¯•ä¼˜å…ˆ (TDD) - å…ˆç¼–å†™æµ‹è¯•,ç¡®ä¿å¤±è´¥åå†å®ç°åŠŸèƒ½

**ç»„ç»‡æ–¹å¼**: ä»»åŠ¡æŒ‰ç”¨æˆ·æ•…äº‹åˆ†ç»„,æ¯ä¸ªæ•…äº‹å¯ç‹¬ç«‹å®ç°å’Œæµ‹è¯•

## æ ¼å¼è¯´æ˜: `[ID] [P?] [Story] Description`
- **[P]**: å¯å¹¶è¡Œè¿è¡Œ (ä¸åŒæ–‡ä»¶,æ— ä¾èµ–)
- **[Story]**: ä»»åŠ¡æ‰€å±ç”¨æˆ·æ•…äº‹ (US1, US2, US3)
- ä»»åŠ¡æè¿°åŒ…å«å…·ä½“æ–‡ä»¶è·¯å¾„

---

## Phase 1: Setup (é¡¹ç›®åˆå§‹åŒ–)

**ç›®çš„**: é…ç½®å¼€å‘ç¯å¢ƒå’ŒåŸºç¡€ç»“æ„

- [x] T001 éªŒè¯ MCP é¡¹ç›®ä¾èµ–å·²æ­£ç¡®å®‰è£… (`apps/tushare-mcp/package.json`)
- [x] T002 éªŒè¯ SDK åŒ…åœ¨ workspace ä¸­æ­£ç¡®é“¾æ¥ (`@hestudy/tushare-sdk`)
- [x] T003 [P] éªŒè¯ vitest æµ‹è¯•ç¯å¢ƒé…ç½® (`apps/tushare-mcp/vitest.config.ts`)

---

## Phase 2: Foundational (åŸºç¡€è®¾æ–½ - é˜»å¡å‰ç½®)

**ç›®çš„**: æ‰€æœ‰ç”¨æˆ·æ•…äº‹ä¾èµ–çš„æ ¸å¿ƒåŸºç¡€è®¾æ–½

**âš ï¸ å…³é”®**: åœ¨æ­¤é˜¶æ®µå®Œæˆå‰,ä¸èƒ½å¼€å§‹ä»»ä½•ç”¨æˆ·æ•…äº‹çš„å®ç°

- [x] T004 åˆ›å»ºé€šç”¨æ—¥æœŸæ ¼å¼åŒ–å·¥å…·å‡½æ•° (`apps/tushare-mcp/src/utils/date-formatter.ts`)
- [x] T005 [P] åˆ›å»ºé€šç”¨æ•°å€¼æ ¼å¼åŒ–å·¥å…·å‡½æ•° (`apps/tushare-mcp/src/utils/number-formatter.ts`)
- [x] T006 [P] åˆ›å»ºæ—¥æœŸèŒƒå›´éªŒè¯å·¥å…·å‡½æ•° (`apps/tushare-mcp/src/utils/date-validator.ts`)

**Checkpoint**: åŸºç¡€è®¾æ–½å°±ç»ª - ç”¨æˆ·æ•…äº‹å®ç°å¯ä»¥å¼€å§‹

---

## Phase 3: User Story 1 - æŸ¥è¯¢è‚¡ç¥¨åŸºæœ¬ä¿¡æ¯ (Priority: P1) ğŸ¯ MVP

**ç›®æ ‡**: ç”¨æˆ·å¯ä»¥é€šè¿‡è‚¡ç¥¨ä»£ç ã€äº¤æ˜“æ‰€æˆ–ä¸Šå¸‚çŠ¶æ€æŸ¥è¯¢è‚¡ç¥¨åŸºæœ¬ä¿¡æ¯

**ç‹¬ç«‹æµ‹è¯•**: ç”¨æˆ·è¯¢é—®"æŸ¥è¯¢è´µå·èŒ…å°çš„åŸºæœ¬ä¿¡æ¯"æˆ–"600519.SH æ˜¯ä»€ä¹ˆè‚¡ç¥¨",ç³»ç»Ÿè¿”å›åŒ…å«è‚¡ç¥¨åç§°ã€ä¸Šå¸‚æ—¥æœŸã€æ‰€å±è¡Œä¸šç­‰åŸºæœ¬ä¿¡æ¯

### æµ‹è¯•ä»»åŠ¡ (US1) - å…ˆç¼–å†™æµ‹è¯•

**æ³¨æ„: è¿™äº›æµ‹è¯•å¿…é¡»å…ˆå†™,å¹¶ç¡®ä¿å¤±è´¥åå†å®ç°åŠŸèƒ½**

- [ ] T007 [P] [US1] ç¼–å†™è‚¡ç¥¨åŸºæœ¬ä¿¡æ¯å·¥å…·å®šä¹‰æµ‹è¯• (`apps/tushare-mcp/tests/tools/stock-basic.test.ts`)
  - éªŒè¯å·¥å…· schema æ­£ç¡®æ€§
  - éªŒè¯å‚æ•°éªŒè¯è§„åˆ™ (ts_code æ­£åˆ™ã€exchange æšä¸¾ç­‰)
  - éªŒè¯è‡³å°‘éœ€è¦ä¸€ä¸ªç­›é€‰æ¡ä»¶

- [ ] T008 [P] [US1] ç¼–å†™è‚¡ç¥¨åŸºæœ¬ä¿¡æ¯å¤„ç†å™¨å•å…ƒæµ‹è¯• (`apps/tushare-mcp/tests/handlers/stock-basic.handler.test.ts`)
  - æµ‹è¯•æ­£å¸¸åœºæ™¯:å•ä¸ªè‚¡ç¥¨æŸ¥è¯¢
  - æµ‹è¯•æ‰¹é‡åœºæ™¯:æŒ‰äº¤æ˜“æ‰€ç­›é€‰
  - æµ‹è¯•é”™è¯¯åœºæ™¯:è‚¡ç¥¨ä»£ç æ ¼å¼é”™è¯¯
  - æµ‹è¯•é”™è¯¯åœºæ™¯:è‚¡ç¥¨ä¸å­˜åœ¨
  - æµ‹è¯•é”™è¯¯åœºæ™¯:æ— ç­›é€‰æ¡ä»¶
  - æµ‹è¯•æ•°æ®æ ¼å¼åŒ–é€»è¾‘

**è¿è¡Œæµ‹è¯•**: `pnpm test stock-basic` (åº”å…¨éƒ¨å¤±è´¥ âŒ)

### å®ç°ä»»åŠ¡ (US1)

- [ ] T009 [US1] åˆ›å»ºè‚¡ç¥¨åŸºæœ¬ä¿¡æ¯å·¥å…·å®šä¹‰ (`apps/tushare-mcp/src/tools/stock-basic.ts`)
  - å®šä¹‰å·¥å…·åç§°: `query_stock_basic`
  - å®šä¹‰ inputSchema (å‚è€ƒ `contracts/query_stock_basic.json`)
  - å‚æ•°: ts_code (å¯é€‰), exchange (å¯é€‰), list_status (å¯é€‰)
  - éªŒè¯è§„åˆ™: è‡³å°‘æä¾›ä¸€ä¸ªç­›é€‰æ¡ä»¶

- [ ] T010 [US1] å®ç°è‚¡ç¥¨åŸºæœ¬ä¿¡æ¯å¤„ç†å™¨ (`apps/tushare-mcp/src/handlers/stock-basic.handler.ts`)
  - å‚æ•°éªŒè¯ (ä½¿ç”¨ zod schema)
  - è°ƒç”¨ SDK: `client.getStockBasic()`
  - æ ¼å¼åŒ–å•ä¸ªè‚¡ç¥¨å“åº”
  - æ ¼å¼åŒ–è‚¡ç¥¨åˆ—è¡¨å“åº” (é™åˆ¶å‰ 50 æ¡)
  - é”™è¯¯å¤„ç† (å¤ç”¨ `handleTushareError`)
  - æ—¥å¿—è®°å½•

- [ ] T011 [US1] åœ¨ MCP æœåŠ¡å™¨ä¸­æ³¨å†Œè‚¡ç¥¨åŸºæœ¬ä¿¡æ¯å·¥å…· (`apps/tushare-mcp/src/server.ts`)
  - å¯¼å…¥ `stockBasicTool`
  - å¯¼å…¥ `handleStockBasic`
  - æ·»åŠ åˆ° `tools` æ•°ç»„
  - æ·»åŠ åˆ° `toolHandlers` Map

**è¿è¡Œæµ‹è¯•**: `pnpm test stock-basic` (åº”å…¨éƒ¨é€šè¿‡ âœ…)

**Checkpoint**: ç”¨æˆ·æ•…äº‹ 1 å®Œæˆ - å¯ä»¥ç‹¬ç«‹æµ‹è¯•è‚¡ç¥¨åŸºæœ¬ä¿¡æ¯æŸ¥è¯¢åŠŸèƒ½

---

## Phase 4: User Story 2 - æŸ¥è¯¢äº¤æ˜“æ—¥å†ä¿¡æ¯ (Priority: P2)

**ç›®æ ‡**: ç”¨æˆ·å¯ä»¥æŸ¥è¯¢æŒ‡å®šæ—¥æœŸæ˜¯å¦ä¸ºäº¤æ˜“æ—¥,æˆ–æŸ¥è¯¢æ—¶é—´æ®µå†…çš„æ‰€æœ‰äº¤æ˜“æ—¥

**ç‹¬ç«‹æµ‹è¯•**: ç”¨æˆ·è¯¢é—®"2025å¹´10æœˆ14æ—¥æ˜¯äº¤æ˜“æ—¥å—"æˆ–"æŸ¥è¯¢2025å¹´10æœˆçš„æ‰€æœ‰äº¤æ˜“æ—¥",ç³»ç»Ÿè¿”å›æ˜ç¡®çš„äº¤æ˜“æ—¥åˆ¤æ–­æˆ–äº¤æ˜“æ—¥åˆ—è¡¨

### æµ‹è¯•ä»»åŠ¡ (US2) - å…ˆç¼–å†™æµ‹è¯•

- [ ] T012 [P] [US2] ç¼–å†™äº¤æ˜“æ—¥å†å·¥å…·å®šä¹‰æµ‹è¯• (`apps/tushare-mcp/tests/tools/trade-calendar.test.ts`)
  - éªŒè¯å·¥å…· schema æ­£ç¡®æ€§
  - éªŒè¯æ—¥æœŸæ ¼å¼éªŒè¯ (YYYYMMDD)
  - éªŒè¯æ—¥æœŸèŒƒå›´é™åˆ¶ (â‰¤ 365 å¤©)
  - éªŒè¯ start_date å’Œ end_date å¿…é¡»åŒæ—¶æä¾›

- [ ] T013 [P] [US2] ç¼–å†™äº¤æ˜“æ—¥å†å¤„ç†å™¨å•å…ƒæµ‹è¯• (`apps/tushare-mcp/tests/handlers/trade-calendar.handler.test.ts`)
  - æµ‹è¯•æ­£å¸¸åœºæ™¯:å•æ—¥æŸ¥è¯¢ (äº¤æ˜“æ—¥)
  - æµ‹è¯•æ­£å¸¸åœºæ™¯:å•æ—¥æŸ¥è¯¢ (ä¼‘å¸‚æ—¥)
  - æµ‹è¯•æ­£å¸¸åœºæ™¯:æ—¥æœŸèŒƒå›´æŸ¥è¯¢
  - æµ‹è¯•é”™è¯¯åœºæ™¯:æ—¥æœŸæ ¼å¼é”™è¯¯
  - æµ‹è¯•é”™è¯¯åœºæ™¯:æ—¥æœŸèŒƒå›´è¶…è¿‡ 1 å¹´
  - æµ‹è¯•é”™è¯¯åœºæ™¯:èµ·å§‹æ—¥æœŸæ™šäºç»“æŸæ—¥æœŸ
  - æµ‹è¯•æ•°æ®æ ¼å¼åŒ–é€»è¾‘

**è¿è¡Œæµ‹è¯•**: `pnpm test trade-calendar` (åº”å…¨éƒ¨å¤±è´¥ âŒ)

### å®ç°ä»»åŠ¡ (US2)

- [ ] T014 [US2] åˆ›å»ºäº¤æ˜“æ—¥å†å·¥å…·å®šä¹‰ (`apps/tushare-mcp/src/tools/trade-calendar.ts`)
  - å®šä¹‰å·¥å…·åç§°: `query_trade_calendar`
  - å®šä¹‰ inputSchema (å‚è€ƒ `contracts/query_trade_calendar.json`)
  - å‚æ•°: start_date (å¿…å¡«), end_date (å¿…å¡«), exchange (å¯é€‰,é»˜è®¤ SSE)
  - éªŒè¯è§„åˆ™: æ—¥æœŸæ ¼å¼ã€æ—¥æœŸèŒƒå›´é™åˆ¶

- [ ] T015 [US2] å®ç°äº¤æ˜“æ—¥å†å¤„ç†å™¨ (`apps/tushare-mcp/src/handlers/trade-calendar.handler.ts`)
  - å‚æ•°éªŒè¯ (ä½¿ç”¨ zod schema + è‡ªå®šä¹‰æ—¥æœŸèŒƒå›´éªŒè¯)
  - è°ƒç”¨ SDK: `client.getTradeCalendar()`
  - æ ¼å¼åŒ–å•æ—¥æŸ¥è¯¢å“åº” (äº¤æ˜“æ—¥/ä¼‘å¸‚æ—¥)
  - æ ¼å¼åŒ–æ—¥æœŸèŒƒå›´æŸ¥è¯¢å“åº” (åˆ—å‡ºæ‰€æœ‰äº¤æ˜“æ—¥)
  - é”™è¯¯å¤„ç† (å¤ç”¨ `handleTushareError`)
  - æ—¥å¿—è®°å½•

- [ ] T016 [US2] åœ¨ MCP æœåŠ¡å™¨ä¸­æ³¨å†Œäº¤æ˜“æ—¥å†å·¥å…· (`apps/tushare-mcp/src/server.ts`)
  - å¯¼å…¥ `tradeCalendarTool`
  - å¯¼å…¥ `handleTradeCalendar`
  - æ·»åŠ åˆ° `tools` æ•°ç»„
  - æ·»åŠ åˆ° `toolHandlers` Map

**è¿è¡Œæµ‹è¯•**: `pnpm test trade-calendar` (åº”å…¨éƒ¨é€šè¿‡ âœ…)

**Checkpoint**: ç”¨æˆ·æ•…äº‹ 2 å®Œæˆ - äº¤æ˜“æ—¥å†æŸ¥è¯¢åŠŸèƒ½å¯ç‹¬ç«‹æµ‹è¯•

---

## Phase 5: User Story 3 - æŸ¥è¯¢æ¯æ—¥æŠ€æœ¯æŒ‡æ ‡ (Priority: P3)

**ç›®æ ‡**: ç”¨æˆ·å¯ä»¥æŸ¥è¯¢è‚¡ç¥¨çš„æ¯æ—¥æŠ€æœ¯æŒ‡æ ‡ (PEã€PBã€æ¢æ‰‹ç‡ã€æµé€šå¸‚å€¼ç­‰)

**ç‹¬ç«‹æµ‹è¯•**: ç”¨æˆ·è¯¢é—®"æŸ¥è¯¢è´µå·èŒ…å°ä»Šå¤©çš„å¸‚ç›ˆç‡å’Œå¸‚å‡€ç‡"æˆ–"600519.SH åœ¨ 2025-10-14 çš„æ¢æ‰‹ç‡æ˜¯å¤šå°‘",ç³»ç»Ÿè¿”å›åŒ…å« PEã€PBã€æ¢æ‰‹ç‡ç­‰æŠ€æœ¯æŒ‡æ ‡

### æµ‹è¯•ä»»åŠ¡ (US3) - å…ˆç¼–å†™æµ‹è¯•

- [ ] T017 [P] [US3] ç¼–å†™æ¯æ—¥æŠ€æœ¯æŒ‡æ ‡å·¥å…·å®šä¹‰æµ‹è¯• (`apps/tushare-mcp/tests/tools/daily-basic.test.ts`)
  - éªŒè¯å·¥å…· schema æ­£ç¡®æ€§
  - éªŒè¯ ts_code å¿…å¡«
  - éªŒè¯ trade_date ä¸ (start_date + end_date) äºŒé€‰ä¸€
  - éªŒè¯æ—¥æœŸèŒƒå›´é™åˆ¶ (â‰¤ 90 å¤©)
  - éªŒè¯è‚¡ç¥¨ä»£ç å’Œæ—¥æœŸæ ¼å¼

- [ ] T018 [P] [US3] ç¼–å†™æ¯æ—¥æŠ€æœ¯æŒ‡æ ‡å¤„ç†å™¨å•å…ƒæµ‹è¯• (`apps/tushare-mcp/tests/handlers/daily-basic.handler.test.ts`)
  - æµ‹è¯•æ­£å¸¸åœºæ™¯:å•æ—¥æŸ¥è¯¢
  - æµ‹è¯•æ­£å¸¸åœºæ™¯:æ—¥æœŸèŒƒå›´æŸ¥è¯¢
  - æµ‹è¯•è¾¹ç•Œåœºæ™¯:æ–°è‚¡æ—  PE/PB (æ˜¾ç¤º N/A)
  - æµ‹è¯•é”™è¯¯åœºæ™¯:è‚¡ç¥¨ä»£ç æ ¼å¼é”™è¯¯
  - æµ‹è¯•é”™è¯¯åœºæ™¯:éäº¤æ˜“æ—¥æŸ¥è¯¢
  - æµ‹è¯•é”™è¯¯åœºæ™¯:æ—¥æœŸèŒƒå›´è¶…è¿‡ 3 ä¸ªæœˆ
  - æµ‹è¯•é”™è¯¯åœºæ™¯:ç¼ºå°‘ ts_code
  - æµ‹è¯•é”™è¯¯åœºæ™¯:åŒæ—¶æä¾› trade_date å’Œ start_date/end_date
  - æµ‹è¯•æ•°æ®æ ¼å¼åŒ–é€»è¾‘

**è¿è¡Œæµ‹è¯•**: `pnpm test daily-basic` (åº”å…¨éƒ¨å¤±è´¥ âŒ)

### å®ç°ä»»åŠ¡ (US3)

- [ ] T019 [US3] åˆ›å»ºæ¯æ—¥æŠ€æœ¯æŒ‡æ ‡å·¥å…·å®šä¹‰ (`apps/tushare-mcp/src/tools/daily-basic.ts`)
  - å®šä¹‰å·¥å…·åç§°: `query_daily_basic`
  - å®šä¹‰ inputSchema (å‚è€ƒ `contracts/query_daily_basic.json`)
  - å‚æ•°: ts_code (å¿…å¡«), trade_date (å¯é€‰), start_date (å¯é€‰), end_date (å¯é€‰)
  - éªŒè¯è§„åˆ™: trade_date ä¸ (start_date + end_date) äº’æ–¥

- [ ] T020 [US3] å®ç°æ¯æ—¥æŠ€æœ¯æŒ‡æ ‡å¤„ç†å™¨ (`apps/tushare-mcp/src/handlers/daily-basic.handler.ts`)
  - å‚æ•°éªŒè¯ (ä½¿ç”¨ zod schema + è‡ªå®šä¹‰æ—¥æœŸèŒƒå›´éªŒè¯)
  - è°ƒç”¨ SDK: `client.getDailyBasic()`
  - æ ¼å¼åŒ–å•æ—¥æŸ¥è¯¢å“åº” (æ˜¾ç¤ºå…³é”®æŒ‡æ ‡)
  - æ ¼å¼åŒ–æ—¥æœŸèŒƒå›´æŸ¥è¯¢å“åº” (è¡¨æ ¼ + ç»Ÿè®¡æ‘˜è¦)
  - å¤„ç†ç©ºå€¼ (PE/PB ä¸º null æ˜¾ç¤º "N/A")
  - å¸‚å€¼å•ä½è½¬æ¢ (ä¸‡å…ƒ â†’ äº¿å…ƒ)
  - é”™è¯¯å¤„ç† (å¤ç”¨ `handleTushareError`)
  - æ—¥å¿—è®°å½•

- [ ] T021 [US3] åœ¨ MCP æœåŠ¡å™¨ä¸­æ³¨å†Œæ¯æ—¥æŠ€æœ¯æŒ‡æ ‡å·¥å…· (`apps/tushare-mcp/src/server.ts`)
  - å¯¼å…¥ `dailyBasicTool`
  - å¯¼å…¥ `handleDailyBasic`
  - æ·»åŠ åˆ° `tools` æ•°ç»„
  - æ·»åŠ åˆ° `toolHandlers` Map

**è¿è¡Œæµ‹è¯•**: `pnpm test daily-basic` (åº”å…¨éƒ¨é€šè¿‡ âœ…)

**Checkpoint**: ç”¨æˆ·æ•…äº‹ 3 å®Œæˆ - æ‰€æœ‰ç”¨æˆ·æ•…äº‹ç°åœ¨éƒ½å¯ä»¥ç‹¬ç«‹æµ‹è¯•

---

## Phase 6: Polish & Integration (å®Œå–„å’Œé›†æˆ)

**ç›®çš„**: è·¨ç”¨æˆ·æ•…äº‹çš„æ”¹è¿›å’Œæœ€ç»ˆéªŒè¯

- [ ] T022 [P] è¿è¡Œå®Œæ•´æµ‹è¯•å¥—ä»¶ (`pnpm test`)
  - ç¡®ä¿æ‰€æœ‰å•å…ƒæµ‹è¯•é€šè¿‡
  - ç¡®ä¿æµ‹è¯•è¦†ç›–ç‡ > 80%

- [ ] T023 [P] æ„å»º MCP æœåŠ¡å™¨ (`pnpm build`)
  - ç¡®ä¿ TypeScript ç¼–è¯‘æ— é”™è¯¯
  - ç¡®ä¿è¾“å‡ºæ–‡ä»¶ç”Ÿæˆæ­£ç¡®

- [ ] T024 è¿è¡Œ quickstart.md ä¸­çš„éªŒè¯åœºæ™¯
  - åœºæ™¯ 1: æŸ¥è¯¢è´µå·èŒ…å°åŸºæœ¬ä¿¡æ¯
  - åœºæ™¯ 2: æŸ¥è¯¢ 2025-10-14 æ˜¯å¦ä¸ºäº¤æ˜“æ—¥
  - åœºæ™¯ 3: æŸ¥è¯¢è´µå·èŒ…å°ä»Šå¤©çš„å¸‚ç›ˆç‡
  - éªŒè¯å“åº”æ ¼å¼å’Œå†…å®¹æ­£ç¡®æ€§

- [ ] T025 [P] ä»£ç å®¡æŸ¥å’Œæ¸…ç†
  - ç§»é™¤è°ƒè¯•æ—¥å¿—
  - ç»Ÿä¸€ä»£ç æ ¼å¼ (`pnpm format`)
  - æ£€æŸ¥ TypeScript ç±»å‹å®‰å…¨

- [ ] T026 [P] æ›´æ–° MCP æœåŠ¡æ–‡æ¡£ (`apps/tushare-mcp/README.md`)
  - æ·»åŠ ä¸‰ä¸ªæ–°å·¥å…·çš„ä½¿ç”¨è¯´æ˜
  - æ·»åŠ ç¤ºä¾‹æŸ¥è¯¢
  - æ›´æ–°å·¥å…·åˆ—è¡¨

---

## Dependencies & Execution Order

### Phase Dependencies

- **Setup (Phase 1)**: æ— ä¾èµ– - å¯ç«‹å³å¼€å§‹
- **Foundational (Phase 2)**: ä¾èµ– Setup å®Œæˆ - é˜»å¡æ‰€æœ‰ç”¨æˆ·æ•…äº‹
- **User Stories (Phase 3-5)**: å…¨éƒ¨ä¾èµ– Foundational å®Œæˆ
  - ç”¨æˆ·æ•…äº‹ä¹‹é—´æ— ä¾èµ– - å¯å¹¶è¡Œå®ç° (å¦‚æœ‰å›¢é˜Ÿèµ„æº)
  - æˆ–æŒ‰ä¼˜å…ˆçº§é¡ºåºå®ç° (P1 â†’ P2 â†’ P3)
- **Polish (Phase 6)**: ä¾èµ–æ‰€æœ‰ç”¨æˆ·æ•…äº‹å®Œæˆ

### User Story Dependencies

- **User Story 1 (P1)**: Foundational å®Œæˆåå¯å¼€å§‹ - æ— å…¶ä»–æ•…äº‹ä¾èµ–
- **User Story 2 (P2)**: Foundational å®Œæˆåå¯å¼€å§‹ - æ— å…¶ä»–æ•…äº‹ä¾èµ–
- **User Story 3 (P3)**: Foundational å®Œæˆåå¯å¼€å§‹ - æ— å…¶ä»–æ•…äº‹ä¾èµ–

### Within Each User Story

- æµ‹è¯•ä»»åŠ¡ä¼˜å…ˆ (TDD æ–¹å¼)
- æµ‹è¯•å¿…é¡»å…ˆå¤±è´¥ (çº¢ç¯)
- å·¥å…·å®šä¹‰ â†’ å¤„ç†å™¨å®ç° â†’ æœåŠ¡å™¨æ³¨å†Œ
- æµ‹è¯•é€šè¿‡å (ç»¿ç¯) å†è¿›å…¥ä¸‹ä¸€ä¸ªæ•…äº‹

### Parallel Opportunities

- **Phase 1**: T003 å¯å¹¶è¡Œ
- **Phase 2**: T005, T006 å¯å¹¶è¡Œ
- **Phase 3 (US1)**: T007, T008 å¯å¹¶è¡Œ (æµ‹è¯•ä»»åŠ¡)
- **Phase 4 (US2)**: T012, T013 å¯å¹¶è¡Œ (æµ‹è¯•ä»»åŠ¡)
- **Phase 5 (US3)**: T017, T018 å¯å¹¶è¡Œ (æµ‹è¯•ä»»åŠ¡)
- **Phase 6**: T022, T023, T025, T026 å¯å¹¶è¡Œ
- **è·¨æ•…äº‹å¹¶è¡Œ**: å¦‚æœæœ‰å¤šä¸ªå¼€å‘è€…,US1ã€US2ã€US3 å¯åŒæ—¶è¿›è¡Œ

---

## Parallel Example: User Story 1

```bash
# å¹¶è¡Œå¯åŠ¨ US1 çš„æ‰€æœ‰æµ‹è¯•ä»»åŠ¡:
Task: "ç¼–å†™è‚¡ç¥¨åŸºæœ¬ä¿¡æ¯å·¥å…·å®šä¹‰æµ‹è¯• (apps/tushare-mcp/tests/tools/stock-basic.test.ts)"
Task: "ç¼–å†™è‚¡ç¥¨åŸºæœ¬ä¿¡æ¯å¤„ç†å™¨å•å…ƒæµ‹è¯• (apps/tushare-mcp/tests/handlers/stock-basic.handler.test.ts)"

# æµ‹è¯•å¤±è´¥å,é¡ºåºå®ç°åŠŸèƒ½:
Task: "åˆ›å»ºè‚¡ç¥¨åŸºæœ¬ä¿¡æ¯å·¥å…·å®šä¹‰"
â†’ Task: "å®ç°è‚¡ç¥¨åŸºæœ¬ä¿¡æ¯å¤„ç†å™¨"
â†’ Task: "åœ¨ MCP æœåŠ¡å™¨ä¸­æ³¨å†Œå·¥å…·"
```

---

## Implementation Strategy

### MVP First (ä»… User Story 1)

1. å®Œæˆ Phase 1: Setup
2. å®Œæˆ Phase 2: Foundational (å…³é”® - é˜»å¡æ‰€æœ‰æ•…äº‹)
3. å®Œæˆ Phase 3: User Story 1
4. **åœæ­¢å¹¶éªŒè¯**: ç‹¬ç«‹æµ‹è¯• User Story 1
5. å¦‚æœå°±ç»ª,å¯ä»¥éƒ¨ç½²/æ¼”ç¤º

### Incremental Delivery (å¢é‡äº¤ä»˜)

1. å®Œæˆ Setup + Foundational â†’ åŸºç¡€å°±ç»ª
2. æ·»åŠ  User Story 1 â†’ ç‹¬ç«‹æµ‹è¯• â†’ éƒ¨ç½²/æ¼”ç¤º (MVP!)
3. æ·»åŠ  User Story 2 â†’ ç‹¬ç«‹æµ‹è¯• â†’ éƒ¨ç½²/æ¼”ç¤º
4. æ·»åŠ  User Story 3 â†’ ç‹¬ç«‹æµ‹è¯• â†’ éƒ¨ç½²/æ¼”ç¤º
5. æ¯ä¸ªæ•…äº‹éƒ½å¢åŠ ä»·å€¼,ä¸ç ´åå…ˆå‰æ•…äº‹

### Parallel Team Strategy (å¹¶è¡Œå›¢é˜Ÿç­–ç•¥)

å¦‚æœæœ‰å¤šä¸ªå¼€å‘è€…:

1. å›¢é˜Ÿå…±åŒå®Œæˆ Setup + Foundational
2. Foundational å®Œæˆå:
   - å¼€å‘è€… A: User Story 1
   - å¼€å‘è€… B: User Story 2
   - å¼€å‘è€… C: User Story 3
3. æ•…äº‹ç‹¬ç«‹å®Œæˆå’Œé›†æˆ

---

## Task Count Summary

- **æ€»ä»»åŠ¡æ•°**: 26 ä¸ªä»»åŠ¡
- **Setup**: 3 ä¸ªä»»åŠ¡
- **Foundational**: 3 ä¸ªä»»åŠ¡
- **User Story 1 (P1)**: 5 ä¸ªä»»åŠ¡ (2 æµ‹è¯• + 3 å®ç°)
- **User Story 2 (P2)**: 5 ä¸ªä»»åŠ¡ (2 æµ‹è¯• + 3 å®ç°)
- **User Story 3 (P3)**: 5 ä¸ªä»»åŠ¡ (2 æµ‹è¯• + 3 å®ç°)
- **Polish**: 5 ä¸ªä»»åŠ¡

### Parallel Opportunities

- **Setup Phase**: 1 ä¸ªå¹¶è¡Œæœºä¼š
- **Foundational Phase**: 2 ä¸ªå¹¶è¡Œæœºä¼š
- **User Story 1**: 2 ä¸ªå¹¶è¡Œæµ‹è¯•ä»»åŠ¡
- **User Story 2**: 2 ä¸ªå¹¶è¡Œæµ‹è¯•ä»»åŠ¡
- **User Story 3**: 2 ä¸ªå¹¶è¡Œæµ‹è¯•ä»»åŠ¡
- **Polish Phase**: 4 ä¸ªå¹¶è¡Œæœºä¼š
- **è·¨æ•…äº‹**: 3 ä¸ªç”¨æˆ·æ•…äº‹å¯å¹¶è¡Œ (å¦‚æœ‰èµ„æº)

### MVP Scope Suggestion

**æ¨è MVP èŒƒå›´**: User Story 1 (æŸ¥è¯¢è‚¡ç¥¨åŸºæœ¬ä¿¡æ¯)
- ç†ç”±: æœ€åŸºç¡€çš„åŠŸèƒ½,æ˜¯å…¶ä»–æŸ¥è¯¢çš„å‰ç½®ä¾èµ–
- ä»»åŠ¡æ•°: Setup (3) + Foundational (3) + US1 (5) = 11 ä¸ªä»»åŠ¡
- é¢„è®¡æ—¶é—´: 1-2 å¤© (å•å¼€å‘è€…,TDD æ–¹å¼)

---

## Notes

- [P] æ ‡è®° = ä¸åŒæ–‡ä»¶,æ— ä¾èµ–,å¯å¹¶è¡Œ
- [Story] æ ‡è®° = ä»»åŠ¡å½’å±çš„ç”¨æˆ·æ•…äº‹,ä¾¿äºè¿½æº¯
- æ¯ä¸ªç”¨æˆ·æ•…äº‹åº”å¯ç‹¬ç«‹å®Œæˆå’Œæµ‹è¯•
- é‡‡ç”¨ TDD æ–¹å¼:å…ˆå†™æµ‹è¯•(çº¢ç¯) â†’ å®ç°åŠŸèƒ½(ç»¿ç¯) â†’ é‡æ„(å¦‚éœ€è¦)
- åœ¨æ¯ä¸ªæ•…äº‹å®Œæˆå,åœ¨ checkpoint å¤„åœæ­¢å¹¶éªŒè¯
- æ¯ä¸ªä»»åŠ¡æˆ–é€»è¾‘ç»„å®Œæˆåæäº¤ä»£ç 
- é¿å…:æ¨¡ç³Šä»»åŠ¡ã€ç›¸åŒæ–‡ä»¶å†²çªã€è·¨æ•…äº‹ä¾èµ–å¯¼è‡´æ— æ³•ç‹¬ç«‹æµ‹è¯•

---

## Related Documents

- **åŠŸèƒ½è§„æ ¼**: [spec.md](./spec.md)
- **å®ç°è®¡åˆ’**: [plan.md](./plan.md)
- **æŠ€æœ¯è°ƒç ”**: [research.md](./research.md)
- **æ•°æ®æ¨¡å‹**: [data-model.md](./data-model.md)
- **API Contracts**: [contracts/](./contracts/)
- **å¿«é€Ÿå¼€å§‹**: [quickstart.md](./quickstart.md)
