{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "query_trade_calendar",
  "description": "查询交易所交易日历,判断指定日期是否为交易日,或查询指定时间段内的所有交易日列表。沪深两市交易日历相同。",
  "type": "object",
  "properties": {
    "name": {
      "type": "string",
      "const": "query_trade_calendar",
      "description": "MCP 工具名称"
    },
    "description": {
      "type": "string",
      "description": "工具功能描述"
    },
    "inputSchema": {
      "type": "object",
      "properties": {
        "start_date": {
          "type": "string",
          "description": "开始日期,格式: YYYYMMDD。与 end_date 配合使用,查询日期范围内的交易日历。",
          "pattern": "^\\d{8}$",
          "examples": ["20251001", "20250101"]
        },
        "end_date": {
          "type": "string",
          "description": "结束日期,格式: YYYYMMDD。与 start_date 配合使用,查询日期范围内的交易日历。",
          "pattern": "^\\d{8}$",
          "examples": ["20251031", "20251231"]
        },
        "exchange": {
          "type": "string",
          "description": "交易所代码,默认 SSE(上交所)。沪深两市交易日历相同,通常不需要修改。",
          "enum": ["SSE", "SZSE"],
          "default": "SSE",
          "examples": ["SSE"]
        }
      },
      "required": ["start_date", "end_date"]
    }
  },
  "validationRules": {
    "dateRange": "end_date - start_date 必须 ≤ 365 天",
    "dateOrder": "start_date 必须 ≤ end_date"
  },
  "examples": [
    {
      "request": {
        "name": "query_trade_calendar",
        "arguments": {
          "start_date": "20251014",
          "end_date": "20251014"
        }
      },
      "response": {
        "content": [
          {
            "type": "text",
            "text": "2025-10-14 是交易日 ✓\n\n交易状态: 正常交易\n上一交易日: 2025-10-13"
          }
        ],
        "structuredContent": {
          "exchange": "SSE",
          "cal_date": "20251014",
          "is_open": "1",
          "pretrade_date": "20251013"
        }
      }
    },
    {
      "request": {
        "name": "query_trade_calendar",
        "arguments": {
          "start_date": "20251001",
          "end_date": "20251031"
        }
      },
      "response": {
        "content": [
          {
            "type": "text",
            "text": "2025年10月交易日历:\n\n交易日 (共 20 天):\n1. 2025-10-01 (周三) [国庆假期调休]\n2. 2025-10-08 (周三)\n3. 2025-10-09 (周四)\n...\n20. 2025-10-31 (周五)\n\n休市日 (共 11 天):\n- 2025-10-04 ~ 2025-10-07 (国庆假期)\n- 2025-10-11, 2025-10-12 (周末)\n..."
          }
        ]
      }
    },
    {
      "request": {
        "name": "query_trade_calendar",
        "arguments": {
          "start_date": "20251012",
          "end_date": "20251012"
        }
      },
      "response": {
        "content": [
          {
            "type": "text",
            "text": "2025-10-12 休市 ✗\n\n休市原因: 周末\n上一交易日: 2025-10-11\n下一交易日: 2025-10-13"
          }
        ],
        "structuredContent": {
          "exchange": "SSE",
          "cal_date": "20251012",
          "is_open": "0"
        }
      }
    }
  ],
  "errorScenarios": [
    {
      "scenario": "日期格式错误",
      "request": {
        "start_date": "2025-10-01",
        "end_date": "2025-10-31"
      },
      "error": {
        "code": "VALIDATION_ERROR",
        "message": "参数格式错误: 日期格式错误,示例: 20251014"
      }
    },
    {
      "scenario": "日期范围超过 1 年",
      "request": {
        "start_date": "20240101",
        "end_date": "20251231"
      },
      "error": {
        "code": "VALIDATION_ERROR",
        "message": "查询范围不能超过 1 年(365 天),当前范围: 730 天。请缩小查询范围。"
      }
    },
    {
      "scenario": "起始日期晚于结束日期",
      "request": {
        "start_date": "20251031",
        "end_date": "20251001"
      },
      "error": {
        "code": "VALIDATION_ERROR",
        "message": "起始日期不能晚于结束日期"
      }
    },
    {
      "scenario": "缺少必填参数",
      "request": {
        "start_date": "20251001"
      },
      "error": {
        "code": "VALIDATION_ERROR",
        "message": "参数格式错误: start_date 和 end_date 必须同时提供"
      }
    }
  ]
}
